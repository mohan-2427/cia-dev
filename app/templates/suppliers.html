{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Member Companies â€” CIA Innovation Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="stylesheet" href="{% static 'style.css' %}" />
</head>
<body class="bg-white">
  <!-- Navbar -->
  <nav class="bg-white border-b border-[#bba99a] fixed-header">
    <div class="container mx-auto px-4">
      <div class="flex items-center justify-between py-4">
        <!-- Left Side: Login + Search -->
        <div class="flex items-center space-x-4 order-1">
          <!-- Login Button -->
          <a
            href="{% url 'login' %}"
            class="flex items-center space-x-2 text-[#3d2d29] hover:text-yellow-700 px-4 py-2 hover:text-white transition font-medium"
          >
            <i class="fas fa-user"></i>
            <span>Login</span>
          </a>
          <!-- Search Bar -->
          <div class="relative hidden md:block">
            <input
              type="text"
              placeholder="Search..!!"
              class="w-40 py-1 px-2 rounded-full text-[#000000] bg-[#FFF9E5] border border-[#000000] shadow-md focus:outline-none pr-10 search-box"
            />
            <button
              class="absolute right-0 top-0 mt-2 mr-4 text-black hover:text-gray-800"
              title="Search"
            >
              <i class="fas fa-search"></i>
            </button>
          </div>
        </div>

        <!-- Center: Logo -->
        <a href="{% url 'index' %}" class="flex items-center space-x-4 order-2 mx-auto px-8">
          <img
            src="{% static 'images/CIA logo.png' %}"
            alt="MachineryHub logo"
            class="h-10 rounded-lg logo-black-filter"
          />
          <span class="text-2xl font-bold text-black">CIA<span class="text-yellow-700">mezo</span></span>
        </a>

        <!-- Right Side -->
        <div class="hidden lg:flex items-center space-x-9 order-3 ml-4">
          <a href="{% url 'index' %}" class="text-[#3d2d29] hover:text-yellow-700 font-medium transition">Home</a>
          <a href="{% url 'about' %}" class="text-[#3d2d29] hover:text-yellow-700 font-medium transition">About Us</a>
          <a href="{% url 'category' %}" class="text-[#3d2d29] hover:text-yellow-700 font-medium transition">Category</a>
          <button id="languageToggle" class="flex items-center space-x-1 text-[#3d2d29] hover:text-yellow-700 font-medium transition px-2 py-1 rounded-lg border border-gray-300 hover:border-yellow-500">
            <img src="https://cdn.builder.io/api/v1/image/assets%2F8b4537dd3fc94785bf1c6169a3c80769%2Fe2eef99b80e945699b2f2503b5a83ffa?format=webp&width=800" alt="Language Toggle" class="w-4 h-4">
            <span id="currentLang" class="text-sm">EN</span>
          </button>
        </div>

        <!-- Mobile Menu -->
        <div class="lg:hidden order-3 flex items-center space-x-4">
          <button id="mobileLanguageToggle" class="flex items-center space-x-1 text-[#3d2d29] hover:text-yellow-700 transition px-2 py-1 rounded border border-gray-300">
            <img src="https://cdn.builder.io/api/v1/image/assets%2F8b4537dd3fc94785bf1c6169a3c80769%2Fe2eef99b80e945699b2f2503b5a83ffa?format=webp&width=800" alt="Language Toggle" class="w-4 h-4">
            <span id="mobileLang" class="text-sm font-semibold">EN</span>
          </button>
          <button id="mobileMenuBtn" class="text-[#3d2d29] hover:text-yellow-700 transition">
            <i class="fas fa-bars text-xl"></i>
          </button>
        </div>
      </div>
    </div>
    <!-- Mobile Navigation -->
    <div id="mobileMenu" class="lg:hidden hidden bg-white border-t border-[#bba99a] shadow-lg">
      <div class="container mx-auto px-4 py-4">
        <div class="flex flex-col space-y-4">
          <a href="{% url 'index' %}" class="text-[#3d2d29] hover:text-yellow-700 font-medium transition py-2 border-b border-gray-200">Home</a>
          <a href="{% url 'about' %}" class="text-[#3d2d29] hover:text-yellow-700 font-medium transition py-2 border-b border-gray-200">About Us</a>
          <a href="{% url 'category' %}" class="text-[#3d2d29] hover:text-yellow-700 font-medium transition py-2 border-b border-gray-200">Category</a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Hero -->
  <section class="bg-gradient-to-r from-blue-500 to-blue-700 text-white py-24">
    <div class="container mx-auto px-4 text-center">
      <div class="max-w-4xl mx-auto">
        <i class="fas fa-rocket text-6xl mb-6 opacity-90"></i>
        <h1 class="text-4xl md:text-5xl font-bold mb-6">Member Companies</h1>
        <p class="text-xl md:text-2xl opacity-90 leading-relaxed">
          Discover innovative startups and companies nurtured by CIA Innovation Hub across various industries
        </p>
      </div>
    </div>
  </section>

  <!-- Filter -->
  <section class="bg-white py-6 border-b shadow-sm">
    <div class="container mx-auto px-4">
      <div class="flex flex-col md:flex-row justify-between items-center gap-4">
          <form method="GET" action="{% url 'suppliers' %}" class="flex items-center">
            <input type="text" name="search" placeholder="Search suppliers..." class="border rounded p-2" value="{{ request.GET.search }}" />
            <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded ml-2">Search</button>
          </form>
        <div>
          <p class="text-gray-600">Showing <span class="font-semibold">{{ count }}</span> member companies</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Suppliers Grid -->
  <section class="py-16">
    <div class="container mx-auto px-4">
      <!-- Move filter section outside the grid -->
      <div class="flex flex-col">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-lg font-bold">Filter by Category</h2>
          <form method="GET" action="{% url 'suppliers' %}">
            <select name="category" class="border rounded p-2">
              <option value="">All Categories</option>
              {% for category in categories %}
                <option value="{{ category }}">{{ category }}</option>
              {% endfor %}
            </select>
            <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded">Filter</button>
          </form>
        </div>
      </div>
      <!-- Supplier cards grid only contains supplier cards -->
     <div class="grid grid-cols-3 gap-8">

        {% for supplier in suppliers %}
        <div class="supplier-card bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 mb-6">
          <div class="relative">
            <div class="relative">
              {% if supplier.image %}
                <img src="{{ supplier.image.url }}" alt="{{ supplier.name }}" class="w-full h-48 object-cover" />
              {% elif supplier.logo %}
                <img src="{{ supplier.logo.url }}" alt="{{ supplier.name }}" class="w-full h-48 object-contain bg-gray-50 p-4" />
              {% else %}
                <img src="{% static 'images/default_supplier.png' %}" alt="{{ supplier.name }}" class="w-full h-48 object-cover" />
              {% endif %}
            </div>
           
          <div class="p-6">
            <div class="flex items-center mb-4">
              <div class="w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold text-lg">
                {{ supplier.name|slice:":2"|upper }}
              </div>
              <div class="ml-4">
                <h3 class="font-bold text-lg text-blue-600 hover:text-blue-800 cursor-pointer transition">{{ supplier.name }}</h3>
                <p class="text-sm text-gray-500 font-medium">Contact: {{ supplier.contact_person_name }}</p>
                <div class="flex items-center mt-1">
                  <span class="bg-blue-100 text-blue-600 px-2 py-1 rounded text-xs font-semibold">{{ supplier.category }}</span>
                </div>
              </div>
            </div>
            <p class="text-gray-600 mb-4 text-sm">{{ supplier.business_description }}</p>
            <div class="flex items-center text-gray-500 mb-2">
              <i class="fas fa-map-marker-alt mr-2 text-blue-500"></i>
              <span class="text-sm">
                {{ supplier.door_number }} {{ supplier.street }}, {{ supplier.area }}, 
                {{ supplier.city }}, {{ supplier.state }} - {{ supplier.pin_code }}
              </span>
            </div>
            {% if supplier.email %}
            <div class="flex items-center text-gray-500 mb-2">
              <i class="fas fa-envelope mr-2 text-blue-500"></i>
              <span class="text-sm">{{ supplier.email }}</span>
            </div>
            {% endif %}
            <div class="flex justify-between items-center pt-4 border-t border-gray-200">
              <div class="flex items-center text-blue-600 font-medium text-sm">
                <i class="fas fa-phone-alt mr-2"></i>
                <span>{{ supplier.phone_number }}</span>
              </div>
              {% if supplier.website_url %}
              <a href="{{ supplier.website_url }}" target="_blank" class="bg-blue-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700 transition">
                Learn More
              </a>
              {% else %}
              <a href="{% url 'supplier_detail' supplier.id %}" class="bg-blue-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700 transition">
                Learn More
              </a>
              {% endif %}
            </div>
          </div>
        </div>
        {% empty %}
          <p class="text-gray-600">No suppliers available.</p>
        {% endfor %}
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-gray-100 text-gray-800 py-4 border-t border-gray-200">
    <div class="container mx-auto px-4 text-center">
      <p class="text-gray-500 text-xs">Â© 2025 CIA. All rights reserved.</p>
    </div>
  </footer>
</body>
</html>
